<div id="design-view" class="view-panel active">
    <aside class="toolbar">
        <div class="tool-group">
            <label>Ferramentas</label>
            <div class="grid">
                <button id="tool-brush" class="tool-btn active" title="Pincel (B)"><i data-lucide="paintbrush"></i></button>
                <button id="tool-eraser" class="tool-btn" title="Borracha (E)"><i data-lucide="eraser"></i></button>
                <button id="tool-selection" class="tool-btn" title="Sele√ß√£o (M)"><i data-lucide="scissors"></i></button>
                <button id="tool-move" class="tool-btn" title="Mover (V)"><i data-lucide="move"></i></button>
                <button id="tool-line" class="tool-btn" title="Linha (L)"><i data-lucide="ruler"></i></button>
                <button id="tool-rect" class="tool-btn" title="Ret√¢ngulo (R)"><i data-lucide="square"></i></button>
                <button id="tool-circle" class="tool-btn" title="C√≠rculo (C)"><i data-lucide="circle"></i></button>
                <button id="tool-picker" class="tool-btn" title="Conta-gotas (Alt)"><i data-lucide="pipette"></i></button>
                <button id="tool-text" class="tool-btn" title="Texto (T)"><i data-lucide="type"></i></button>
                <button id="tool-fill" class="tool-btn" title="Balde de Tinta (F)"><i data-lucide="paint-bucket"></i></button>
                <button id="tool-font-gen" class="tool-btn" title="Gerador de Fontes"><i data-lucide="languages"></i></button>
                <button id="tool-ai-gen" class="tool-btn" title="Gerar com IA" style="background: linear-gradient(135deg, #8b5cf6, #ec4899);"><i data-lucide="sparkles"></i></button>
                <button id="tool-clear" class="tool-btn" title="Limpar Tudo"><i data-lucide="trash-2"></i></button>
            </div>
        </div>

        <div class="tool-group">
            <label>Simetria</label>
            <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                <button id="btn-sym-x" class="secondary-btn small-btn" style="width: 100%;"><i data-lucide="divide"></i> Simetria X</button>
                <button id="btn-sym-y" class="secondary-btn small-btn" style="width: 100%;"><i data-lucide="divide" style="transform: rotate(90deg);"></i> Simetria Y</button>
            </div>
        </div>

        <div class="tool-group">
            <label>Controles de Imagem</label>
            <div id="transform-controls" class="grid" style="display: none;">
                <button id="btn-apply-img" class="primary-btn small-btn">Aplicar</button>
                <button id="btn-cancel-img" class="secondary-btn small-btn">Cancelar</button>
                <div class="input-field" style="grid-column: span 2;">
                    <span>Zoom Imagem</span>
                    <input type="range" id="img-zoom" min="0.1" max="5" step="0.1" value="1">
                    <span id="img-zoom-val" style="font-size: 0.7rem;">1.0x</span>
                </div>
            </div>
            <div class="grid">
                <button id="btn-clear-guides" class="secondary-btn small-btn"><i data-lucide="delete"></i> Limpar Guias</button>
            </div>
        </div>

        <div class="tool-group">
            <label>Filtros</label>
            <div class="grid">
                <button id="filter-gray" class="secondary-btn small-btn">PB</button>
                <button id="filter-invert" class="secondary-btn small-btn">Inv</button>
                <button id="filter-bright" class="secondary-btn small-btn">Br+</button>
                <button id="filter-contrast" class="secondary-btn small-btn">Co+</button>
            </div>
        </div>

        <div class="tool-group">
            <label>Ajustes</label>
            <div class="input-field">
                <span>Pincel: <span id="brush-size-val">2</span>px</span>
                <input type="range" id="brush-size" min="1" max="50" value="2">
            </div>
            <div class="input-field">
                <span>Cor</span>
                <input type="color" id="color-picker" value="#38bdf8">
            </div>
            <div class="input-field">
                <span>Dithering</span>
                <select id="brush-pattern">
                    <option value="solid">S√≥lido</option>
                    <option value="checker">Xadrez</option>
                    <option value="dots">Pontilhado</option>
                    <option value="lines">Linhas</option>
                </select>
            </div>
        </div>

        <div class="tool-group">
            <label>Paleta</label>
            <div id="color-palette" class="palette-grid">
                <button id="btn-save-color" class="add-color-btn">+</button>
            </div>
            <select id="palette-presets" style="margin-top:8px;">
                <option value="custom">Personalizada</option>
                <option value="pico8">PICO-8</option>
                <option value="nes">NES</option>
                <option value="gameboy">GameBoy</option>
            </select>
        </div>
    </aside>

    <section class="editor-area">
        <div class="canvas-container">
            <div style="display: flex;">
                <div style="width: 25px; height: 25px; background: var(--card-bg); border: 1px solid var(--border); border-bottom: none; border-right: none;"></div>
                <div id="ruler-h" class="ruler ruler-h" style="flex: 1; border-bottom: none;"></div>
            </div>
            <div class="canvas-middle" style="display: flex;">
                <div id="ruler-v" class="ruler ruler-v"></div>
                <div id="canvas-wrapper" class="canvas-wrapper clipping">
                    <div id="layers-container">
                        <canvas id="temp-canvas" width="240" height="240"></canvas>
                        <canvas id="grid-canvas" width="240" height="240"></canvas>
                        <div id="guides-container"></div>
                        <div id="image-transform-layer"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <aside class="sidebar">
        <div class="tool-group">
            <label>Visualiza√ß√£o</label>
            <div id="preview-wrapper" class="preview-box preview-dark">
                <canvas id="preview-canvas" width="240" height="240" style="width:100%; height:auto;"></canvas>
            </div>
            <div class="grid" style="margin-top:8px;">
                <label class="check-container">
                    <input type="checkbox" id="toggle-grid" checked>
                    <span class="checkmark"></span> Grid
                </label>
                <label class="check-container">
                    <input type="checkbox" id="toggle-ruler" checked>
                    <span class="checkmark"></span> R√©guas
                </label>
                <label class="check-container">
                    <input type="checkbox" id="toggle-guides" checked>
                    <span class="checkmark"></span> Guias
                </label>
            </div>
            <div class="grid" style="margin-top:8px;">
                <select id="preview-style">
                    <option value="dark">Escuro</option>
                    <option value="light">Claro</option>
                    <option value="check">Grid</option>
                </select>
            </div>
            <div class="input-field compact" style="margin-top:8px;">
                <span>Zoom: <span id="work-zoom-val">100</span>%</span>
                <input type="range" id="work-zoom" min="50" max="800" value="100" step="10">
            </div>
        </div>

        <div class="tool-group">
            <label>Camadas</label>
            <div id="layers-list" class="layers-list" style="max-height: 150px; overflow-y: auto;"></div>
            <div style="display: flex; gap:5px; margin-top: 5px; flex-wrap: wrap;">
                <button id="btn-add-layer" class="secondary-btn small-btn" style="flex:1; min-width: 80px;"><i data-lucide="plus"></i> Camada</button>
                <button id="btn-merge-layers" class="secondary-btn small-btn" title="Achatar"><i data-lucide="layers"></i></button>
            </div>
        </div>

        <div class="tool-group">
            <label>Componentes/UI</label>
            <div class="grid">
                <button id="add-ui-slider" class="secondary-btn small-btn"><i data-lucide="sliders"></i> Slider</button>
                <button id="add-ui-switch" class="secondary-btn small-btn"><i data-lucide="toggle-left"></i> Switch</button>
                <button id="add-ui-bar" class="secondary-btn small-btn"><i data-lucide="loader"></i> Bar</button>
            </div>
            <div id="prop-panel" class="hint" style="margin-top:8px;">Propriedades</div>
        </div>

        <div class="tool-group">
            <label>Config Projeto</label>
            <div class="input-field"><span>Nome Sprite</span><input type="text" id="array-name" value="image_01"></div>
            <div class="grid" style="margin-top:8px;">
                <div class="input-field"><span>W</span><input type="number" id="canvas-width" value="240"></div>
                <div class="input-field"><span>H</span><input type="number" id="canvas-height" value="240"></div>
            </div>
            <div class="input-field"><span>Fundo</span><input type="color" id="bg-color-picker" value="#000000"></div>
            <div class="input-field">
                <span>Formato</span>
                <select id="export-format">
                    <option value="jpeg">Imagem JPEG (.jpg)</option>
                    <option value="rgb565">RGB565 (C Array)</option>
                    <option value="rgb888">RGB888 (C Array)</option>
                    <option value="rle565">RGB565 + RLE (C Array)</option>
                </select>
            </div>
        </div>

        <div class="tool-group">
            <label>Cole√ß√£o & Anima√ß√£o</label>
            <div id="sprite-list" class="sprite-list"></div>
            <div style="display: flex; gap:5px; margin-top:8px; flex-wrap: wrap;">
                <button id="btn-add-collection" class="secondary-btn small-btn" style="flex:1; min-width: 80px;" title="Adicionar Design Atual √† Cole√ß√£o">üì¶ Col.</button>
                <button id="btn-play-anim" class="secondary-btn small-btn" title="Tocar Anima√ß√£o">‚ñ∂Ô∏è</button>
            </div>
            <button id="btn-export-collection" class="primary-btn small-btn" style="width:100%; margin-top: 8px;"><i data-lucide="download"></i> Exportar Cole√ß√£o (.h)</button>
        </div>
    </aside>
</div>
