@{
    ViewData["Title"] = "Studio";
}

<!-- GLOBAL HEADER -->
<header>
    <div class="logo">
        <div class="logo-icon-box">
            <i data-lucide="palette" class="icon logo-icon"></i>
        </div>
        <div class="logo-text-wrapper">
            <h1 class="logo-main-text">PixelDisplay240 <span class="logo-v5">v5</span></h1>
            <span class="logo-subtitle">INSIDE EDITION</span>
        </div>
    </div>

    <nav class="mode-nav">
        <button id="nav-design" class="nav-btn active"><i data-lucide="wrench"></i> Design</button>
        <button id="nav-prototype" class="nav-btn"><i data-lucide="smartphone"></i> Prot√≥tipo</button>
        <button id="nav-hardware" class="nav-btn"><i data-lucide="plug"></i> Config HW</button>
    </nav>

    <div class="header-actions">
        <div class="action-group">
            <button id="btn-undo" class="secondary-btn icon-btn" title="Desfazer (Ctrl+Z)"><i data-lucide="undo"></i></button>
            <button id="btn-redo" class="secondary-btn icon-btn" title="Refazer (Ctrl+Y)"><i data-lucide="redo"></i></button>
        </div>
        
        <div class="divider"></div>
        
        <button id="btn-upload" class="secondary-btn small-btn" onclick="document.getElementById('file-input').click()"><i data-lucide="upload"></i> Importar</button>
        <input type="file" id="file-input" accept="image/*" style="display: none;">
        
        <div class="divider"></div>
        
        <div class="action-group">
            <button id="btn-save-project" class="secondary-btn icon-btn" title="Salvar Projeto"><i data-lucide="save"></i></button>
            <button id="btn-load-project" class="secondary-btn icon-btn" title="Abrir Projeto"><i data-lucide="folder-open"></i></button>
            <input type="file" id="project-input" accept=".json" style="display: none;">
        </div>

        <div class="divider"></div>
        
        <div class="action-group">
            <button id="btn-help" class="secondary-btn icon-btn" title="Ajuda"><i data-lucide="help-circle"></i></button>
            <button id="btn-agent-config" class="secondary-btn icon-btn" title="Configurar Agentes"><i data-lucide="settings"></i></button>
        </div>
        
        <button id="btn-export" class="primary-btn small-btn"><i data-lucide="download"></i> Exportar</button>
    </div>
</header>

<main id="main-views">
    @await Html.PartialAsync("_DesignView")
    @await Html.PartialAsync("_PrototypeView")
    @await Html.PartialAsync("_HardwareView")
</main>

@await Html.PartialAsync("_Footer")
@await Html.PartialAsync("_Modals")

@section Scripts {
    <script>
        // Emergency icon reload
        window.addEventListener('load', () => {
            if (typeof lucide !== 'undefined') lucide.createIcons();
        });
    </script>
}
